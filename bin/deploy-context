#!/usr/bin/env ruby

require 'deploy-context'
require 'deploy-context/deploy'

deployer = Context::DeployContext.new(__dir__)

if ARGV[0].nil?
  deployer.cycle
else
  case ARGV[0]
  when 'once'
    puts "Parameter passe #{ARGV[0]}"
    deployer.cycle
  when 'always'
    while true do
      deployer.cycle
    end
  else
    puts "Unkonown setting #{ARGV[0]}"
  end
end


